<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="PeopleCounterDesktop.Views.LoginPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    BackgroundColor="#F5F5F7"
    Shell.NavBarIsVisible="False">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Grid Grid.Column="0">
            <Image Aspect="AspectFill" Source="login_bg.jpg" />

            <VerticalStackLayout
                HorizontalOptions="Center"
                Spacing="0"
                VerticalOptions="Center">

                <Border
                    Padding="50,40"
                    BackgroundColor="White"
                    HorizontalOptions="Center"
                    Stroke="White"
                    StrokeShape="RoundRectangle 20"
                    StrokeThickness="1"
                    VerticalOptions="Center">

                    <VerticalStackLayout Spacing="20">


                        <Label
                            FontFamily="PoppinsBold"
                            FontSize="38"
                            HorizontalOptions="Center"
                            Text="Smart Occupancy Monitoring"
                            TextColor="#6366F1" />

                        <Label
                            Margin="0,20,0,0"
                            FontFamily="PoppinsBold"
                            FontSize="22"
                            HorizontalOptions="Center"
                            Opacity="0.9"
                            Text="Sign in to continue"
                            TextColor="#1F2937"
                            WidthRequest="450" />

                        <!--  Username Section with Grid  -->
                        <Grid
                            ColumnSpacing="15"
                            RowSpacing="8"
                            WidthRequest="450">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <Label
                                Grid.Row="0"
                                Grid.Column="0"
                                FontFamily="PoppinsRegular"
                                FontSize="14"
                                Text="Username:"
                                TextColor="#1F2937"
                                VerticalOptions="Center" />

                            <Entry
                                Grid.Row="0"
                                Grid.Column="1"
                                BackgroundColor="LightGrey"
                                FontSize="15"
                                Keyboard="Email"
                                Placeholder="Enter your username"
                                PlaceholderColor="#9CA3AF"
                                Text="{Binding Username}"
                                TextColor="#1F2937" />

                            <Label
                                Grid.Row="1"
                                Grid.Column="0"
                                FontFamily="PoppinsRegular"
                                FontSize="14"
                                Text="Password:"
                                TextColor="#1F2937"
                                VerticalOptions="Center" />

                            <Entry
                                Grid.Row="1"
                                Grid.Column="1"
                                BackgroundColor="LightGrey"
                                FontSize="15"
                                IsPassword="True"
                                Placeholder="Enter your password"
                                PlaceholderColor="#9CA3AF"
                                Text="{Binding Password}"
                                TextColor="#1F2937" />
                        </Grid>

                        <!--  Sign In Button  -->
                        <Button
                            Margin="0,12,0,0"
                            BackgroundColor="#6366F1"
                            Command="{Binding LoginCommand}"
                            CornerRadius="8"
                            FontFamily="PoppinsBold"
                            FontSize="16"
                            HeightRequest="50"
                            HorizontalOptions="Center"
                            Text="Sign In"
                            TextColor="White"
                            WidthRequest="450" />

                    </VerticalStackLayout>
                </Border>

            </VerticalStackLayout>
        </Grid>

        <!--  Loading Overlay  -->
        <Grid
            Grid.ColumnSpan="1"
            BackgroundColor="#E6F5F5F7"
            IsVisible="{Binding IsLoading}">

            <Border
                Padding="50,40"
                BackgroundColor="White"
                HorizontalOptions="Center"
                Stroke="#E5E7EB"
                StrokeShape="RoundRectangle 20"
                StrokeThickness="1"
                VerticalOptions="Center">

                <VerticalStackLayout Spacing="20" WidthRequest="220">

                    <ActivityIndicator
                        HeightRequest="60"
                        HorizontalOptions="Center"
                        IsRunning="{Binding IsLoading}"
                        WidthRequest="60"
                        Color="#6366F1" />

                    <Label
                        FontFamily="PoppinsBold"
                        FontSize="18"
                        HorizontalOptions="Center"
                        HorizontalTextAlignment="Center"
                        Text="Signing in..."
                        TextColor="#1F2937" />

                    <Label
                        Margin="0,-10,0,0"
                        FontFamily="PoppinsRegular"
                        FontSize="14"
                        HorizontalOptions="Center"
                        HorizontalTextAlignment="Center"
                        Text="Please wait"
                        TextColor="#6B7280" />
                </VerticalStackLayout>
            </Border>
        </Grid>

    </Grid>
</ContentPage>